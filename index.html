<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Party Bus RSVP</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <style>
    :root {
      --primary: #e91e63;
      --accent: #ff9800;
      --bg: #fff8f8;
    }
    body {font-family: system-ui, sans-serif; max-width: 700px; margin: 0 auto; padding: 1rem; background:var(--bg);}
    h1 {text-align:center; color:var(--primary); margin-bottom:0.5rem;}
    .banner {background:linear-gradient(135deg,var(--primary),var(--accent)); color:white; padding:1.5rem; border-radius:12px; margin-bottom:1.5rem; text-align:center;}
    .banner h2 {margin:0.5rem 0; font-size:1.8rem;}
    .banner p {margin:0.4rem 0; font-size:1rem;}
    .countdown {font-size:1.4rem; font-weight:bold; color:#fff; margin:0.8rem 0;}
    .form {margin:2rem 0; text-align:center;}
    input, button {font-size:1rem; padding:0.7rem; margin:0.4rem; border-radius:8px; width:100%; max-width:280px;}
    input {border:2px solid #ddd;}
    button {background:var(--primary); color:white; border:none; cursor:pointer; font-weight:bold;}
    button:hover {background:#c2185b;}
    ul {list-style:none; padding:0;}
    li {padding:0.8rem; background:#fff; margin:0.5rem 0; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,0.1);}
    .total {font-weight:bold; margin:1.5rem 0; text-align:center; font-size:1.2rem; color:var(--primary);}
    .modal {display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:99;}
    .modal-content {background:white; padding:1.5rem; border-radius:12px; max-width:90%; text-align:center;}
    .close {float:right; font-size:1.5rem; cursor:pointer;}
    .map {margin:1.5rem 0; border-radius:12px; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
    .info {background:#f0f0f0; padding:1rem; border-radius:8px; margin:1rem 0; font-size:0.95rem;}
  </style>
</head>
<body>
  <!-- ===== EVENT BANNER ===== -->
  <div class="banner">
    <h2>Party Bus Adventure 2025!</h2>
    <p><strong>Date:</strong> <span id="eventDate">Saturday, February 31, 2026</span></p>
    <p><strong>Meet-up Time:</strong> <span id="meetTime">6:00 PM</span></p>
    <p><strong>Location:</strong> <span id="meetLocation">Parking Lot aaa behind Target, 72nd & Dodge, Omaha</span></p>
    <p><strong>Route:</strong> <span id="route">Omaha → Wahoo → Ashland → Louisville → back</span></p>
    <p><strong>Cost:</strong> $<span id="price">50</span> per person</p>
    <p><strong>Refund:</strong> <span id="refund">Full refund if bus is canceled</span></p>
    <p><strong>Reserve:</strong> Send $<span id="price2">45</span> to <a href="#" id="venmoLink" style="color:#fff; text-decoration:underline;" target="_blank">@YourVenmo</a></p>
    <div class="countdown" id="countdown">Loading...</div>
  </div>

  <!-- ===== MEET-UP MAP ===== -->
  <div class="map">
    <iframe
      width="100%"
      height="300"
      style="border:0;"
      loading="lazy"
      allowfullscreen
      referrerpolicy="no-referrer-when-downgrade"
      src="">
    </iframe>
  </div>

  <div class="info">
    <strong>Meet here at <span id="meetTime2">6:00 PM</span> sharp!</strong><br>
    Look for the <strong>white party bus</strong> with neon lights. We leave at <span id="departTime">6:15 PM</span> — don’t be late!
  </div>

  <!-- ===== RSVP FORM ===== -->
  <div class="form">
    <input type="text" id="name" placeholder="Your name" required />
    <input type="number" id="guests" placeholder="How many (incl. you)" min="1" value="1" required />
    <button id="join">Yes, I’m joining!</button>
  </div>

  <div id="list"></div>
  <div class="total" id="total"></div>

  <!-- ===== PAYMENT REMINDER MODAL ===== -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="close" id="close">×</span>
      <h3>You're on the bus!</h3>
      <p>Please send <strong>$<span id="modalTotal">45</span></strong> to <a href="#" id="modalVenmo" target="_blank">@YourVenmo</a> to reserve your spot.</p>
      <p><em>See you at <span id="meetTime3">6:00 PM</span> — can’t wait!</em></p>
    </div>
  </div>

<script>
  // ================== EDIT THIS CONFIG ONLY ==================
  const CONFIG = {
    eventDate: 'November 22, 2025 18:00:00',  // YYYY-MM-DD HH:MM:SS (24h)
    meetTime: '6:00 PM',
    departTime: '6:15 PM',
    meetLocation: 'Parking Lot AAA behind Target, 72nd & Dodge, Omaha, NE',
    mapEmbedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2996.345!2d-96.023456!3d41.259789!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDHCsDE1JzM1LjIiTiA5NsKwMDInMjUuNSJX!5e0!3m2!1sen!2sus!4v1234567890!5m2!1sen!2sus', // Get from Google Maps "Share > Embed"
    route: 'Omaha → Wahoo → Ashland → Louisville → back to Omaha',
    pricePerPerson: 45,
    venmoUsername: 'YourVenmo',
    venmoLink: 'https://venmo.com/your-venmo',
    refundPolicy: 'If the bus doesn’t happen, I’ll fully refund you.'
  };
  // ===========================================================

  // Paste your Firebase config below
  const firebaseConfig = {
  apiKey: "AIzaSyDXcsti1V6fNhlDTLEOjxA6cRi9StiW-tA",
  authDomain: "partybus-omaha.firebaseapp.com",
  databaseURL: "https://partybus-omaha-default-rtdb.firebaseio.com",
  projectId: "partybus-omaha",
  storageBucket: "partybus-omaha.firebasestorage.app",
  messagingSenderId: "463029096908",
  appId: "1:463029096908:web:e40a660ffae68ef34d0d69"
};

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database().ref('rsvps');

  // DOM Elements
  const countdownEl = document.getElementById('countdown');
  const modal = document.getElementById('modal');
  const close = document.getElementById('close');
  const nameInput = document.getElementById('name');
  const guestsInput = document.getElementById('guests');
  const joinBtn = document.getElementById('join');
  const listEl = document.getElementById('list');
  const totalEl = document.getElementById('total');

  // Update all text from CONFIG
  document.getElementById('eventDate').textContent = new Date(CONFIG.eventDate).toLocaleDateString('en-US', {weekday:'long', month:'long', day:'numeric', year:'numeric'});
  document.getElementById('meetTime').textContent = document.getElementById('meetTime2').textContent = document.getElementById('meetTime3').textContent = CONFIG.meetTime;
  document.getElementById('departTime').textContent = CONFIG.departTime;
  document.getElementById('meetLocation').textContent = CONFIG.meetLocation;
  document.getElementById('route').textContent = CONFIG.route;
  document.getElementById('price').textContent = document.getElementById('price2').textContent = CONFIG.pricePerPerson;
  document.getElementById('refund').textContent = CONFIG.refundPolicy;
  document.getElementById('venmoLink').href = document.getElementById('modalVenmo').href = CONFIG.venmoLink;
  document.getElementById('venmoLink').textContent = document.getElementById('modalVenmo').textContent = '@' + CONFIG.venmoUsername;

  // Set map
  document.querySelector('iframe').src = CONFIG.mapEmbedUrl;

  // Close modal
  close.onclick = () => modal.style.display = 'none';
  window.onclick = e => { if (e.target === modal) modal.style.display = 'none'; };

  // Countdown Timer
  function updateCountdown() {
    const now = new Date().getTime();
    const event = new Date(CONFIG.eventDate).getTime();
    const diff = event - now;

    if (diff <= 0) {
      countdownEl.textContent = "The party bus is here! Go to meet-up!";
      countdownEl.style.color = "#4caf50";
      return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    countdownEl.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();

  // Submit RSVP
  joinBtn.onclick = () => {
    const name = nameInput.value.trim();
    const guests = parseInt(guestsInput.value) || 1;
    if (!name) return alert('Enter your name');
    const totalCost = guests * CONFIG.pricePerPerson;
    db.push({name, guests, totalCost, ts: Date.now()});
    nameInput.value = ''; guestsInput.value = 1;
    document.getElementById('modalTotal').textContent = totalCost;
    modal.style.display = 'flex';
  };

  // Live list
  db.on('value', snapshot => {
    const data = snapshot.val() || {};
    const entries = Object.values(data);
    entries.sort((a,b)=> b.ts - a.ts);

    listEl.innerHTML = '<ul>' + entries.map(e =>
      `<li><strong>${e.name}</strong> – ${e.guests} ${e.guests===1?'person':'people'} ($${e.totalCost})</li>`
    ).join('') + '</ul>';

    const totalPeople = entries.reduce((s,e)=>s+e.guests,0);
    const totalMoney = entries.reduce((s,e)=>s+e.totalCost,0);
    totalEl.innerHTML = `Total: <strong>${totalPeople}</strong> ${totalPeople===1?'person':'people'} – <strong>$${totalMoney}</strong> collected`;
  });
</script>
</body>
</html>
